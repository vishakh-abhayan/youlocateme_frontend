<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>YouLocateMe</title>
    <meta
      name="description"
      content="YouLocateMe simplifies online shopping with unique location IDs. Register once and use your ID for quick, secure checkouts across e-commerce sites. Enhance your shopping experience with convenience and security."
    />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="YouLocateMe" />
    <meta
      property="og:description"
      content="Discover how YouLocateMe can transform your online shopping with a unique location ID for fast, secure checkouts. Register today!"
    />
    <meta property="og:image" content="https://youlocate.me/banner_og.png" />
    <meta property="og:url" content="https://youlocate.me" />
    <meta property="og:site_name" content="YouLocateMe" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@YouLocateMe" />
    <meta name="twitter:title" content="YouLocateMe" />
    <meta
      name="twitter:description"
      content="Register once and shop anywhere with YouLocateMe's unique location IDs. Quick, secure, convenient."
    />
    <meta name="twitter:image" content="https://youlocate.me/banner_og.png" />
    <meta
      name="keywords"
      content="YouLocateMe, online shopping, location ID, quick checkout, secure shopping, e-commerce convenience"
    />
    <link rel="icon" href="./favicon.ico" type="image/x-icon" />
    <link rel="canonical" href="https://youlocate.me" />
    <meta name="robots" content="index, follow" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="./styles.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="w-full h-screen flex items-center justify-center">
      <div class="w-2/5">
        <div class="space-y-6">
          <div class="space-y-2 text-center flex justify-center">
            <div
              class="flex items-center justify-center absolute top-0 left-4 mt-4 mr-4"
            >
              <h2 class="text-2xl font-bold text-gray-700">YouLocateMe</h2>
              <img src="./assets/icon2.png" class="w-9" alt="" />
            </div>
          </div>
          <div class="toggle-buttons flex justify-center space-x-4">
            <button id="signupBtn" class="toggle-btn active">Register</button>
            <button id="signinBtn" class="toggle-btn">Retrieve</button>
          </div>
          <!-- Registration Form -->
          <form id="registrationForm" class="space-y-6">
            <div class="space-y-4">
              <div class="space-y-2">
                <label class="text-sm font-medium leading-none" for="homeName"
                  >Address</label
                >
                <input
                  class="flex h-10 w-full rounded-md border bg-background px-3 py-2 text-sm"
                  id="homeName"
                  placeholder="my home"
                  required
                />
              </div>
              <div class="space-y-2">
                <label class="text-sm font-medium leading-none" for="street"
                  >Street</label
                >
                <input
                  class="flex h-10 w-full rounded-md border bg-background px-3 py-2 text-sm"
                  id="street"
                  placeholder="123 Street"
                  required
                />
              </div>
              <div class="grid grid-cols-2 gap-4">
                <div class="space-y-2">
                  <label class="text-sm font-medium leading-none" for="city"
                    >City</label
                  >
                  <input
                    class="flex h-10 w-full rounded-md border bg-background px-3 py-2 text-sm"
                    id="city"
                    placeholder="City"
                    required
                  />
                </div>
                <div class="space-y-2">
                  <label class="text-sm font-medium leading-none" for="zip"
                    >ZIP</label
                  >
                  <input
                    class="flex h-10 w-full rounded-md border bg-background px-3 py-2 text-sm"
                    id="zip"
                    placeholder="ZIP"
                    required
                  />
                </div>
              </div>
              <div class="space-y-2">
                <label class="text-sm font-medium leading-none" for="country"
                  >Country</label
                >
                <input
                  class="flex h-10 w-full rounded-md border bg-background px-3 py-2 text-sm"
                  id="country"
                  placeholder="Country"
                  required
                />
              </div>
              <button
                type="submit"
                class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700"
              >
                Submit
              </button>
            </div>
          </form>
          <!-- Retrieval Form -->
          <form id="retrievalForm" class="space-y-6 hidden">
            <div class="space-y-4">
              <div class="space-y-2 w-full relative">
                <label class="text-sm font-medium leading-none" for="locateMeId"
                  >LocateMe ID</label
                >
                <input
                  class="flex h-10 w-full rounded-md border bg-background px-3 py-2 text-sm"
                  id="locateMeId"
                  placeholder="myhome@locateme"
                  required
                />
                <!-- <button
                  id="copy-button"
                  class="absolute top-7 right-2 bg-blue-500 hover:bg-blue-600 text-white p-1 rounded text-sm"
                >
                  <img class="h-5" src="./assets/send.png" alt="" />
                </button> -->
              </div>
              <div class="space-y-2">
                <label for="">Request</label>
                <div class="max-w-2xl mx-auto relative">
                  <button
                    id="copy-button"
                    class="absolute top-1 right-2 bg-blue-100 hover:bg-blue-200 text-white p-1 rounded text-sm"
                  >
                    <img class="h-5" src="./assets/image.png" alt="" />
                  </button>
                  <div
                    class="text-black h-10 rounded-lg p-2 border border-gray-300 flex align-center"
                  >
                    <code class="">
                      <span class="text-pink-700">curl</span>
                      <span class="text-green-700">
                        'https://api.locateme.com/v1/`${id}`'
                      </span>
                    </code>
                  </div>
                </div>
              </div>
              <div class="space-y-2">
                <label for="">Response</label>
                <div class="max-w-2xl mx-auto opacity-70 relative">
                  <pre
                    class="text-black rounded-lg overflow-x-auto border border-gray-100"
                  >
                  <code id="code-block" class="language-json">
                  </code>
                </pre>
                </div>
              </div>
              <button
                type="submit"
                class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700"
              >
                Retrieve Address
              </button>
            </div>
          </form>
        </div>
      </div>
      <div
        id="modal"
        class="flex hidden items-center justify-center fixed inset-0 bg-gray-600 bg-opacity-50 h-full w-full"
        role="dialog"
      >
        <div
          class="top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"
        >
          <div class="mt-3 text-center flex items-center flex-col gap-2">
            <div class="flex w-full justify-center mb-5">
              <img class="w-16" src="./assets/tick.png" alt="" />
            </div>
            <h3
              class="text-lg leading-6 font-medium text-gray-900"
              id="modal-title"
            >
              Registration Successful
            </h3>
            <label class="text-gray-500" for="">locationId:</label>
            <div
              class="p-1 h-9 w-64 bg-gray-100 text-center border border-gray-200 rounded-md"
            >
              <p class="text-base text-gray-500" id="modal-body"></p>
            </div>
            <div class="items-center px-4 py-3">
              <button
                id="okBtn"
                class="px-9 py-2 bg-blue-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-blue-700"
              >
                OK
              </button>
            </div>
          </div>
        </div>
      </div>
      <script>
        const signupBtn = document.getElementById('signupBtn');
        const signinBtn = document.getElementById('signinBtn');
        const registrationForm = document.getElementById('registrationForm');
        const retrievalForm = document.getElementById('retrievalForm');
        const modal = document.getElementById('modal');
        const modalBody = document.getElementById('modal-body');
        const okBtn = document.getElementById('okBtn');
        const copyButton = document.getElementById('copy-button');
        const codeBlock = document.getElementById('code-block');

        okBtn.addEventListener('click', () => {
          modal.classList.add('hidden');
        });

        copyButton.addEventListener('click', () => {
          const range = document.createRange();
          range.selectNode(codeBlock);
          window.getSelection().removeAllRanges();
          window.getSelection().addRange(range);
          try {
            document.execCommand('copy');
          } catch (err) {
            console.log('Failed to copy');
          }
          window.getSelection().removeAllRanges();
        });

        signupBtn.addEventListener('click', () => {
          registrationForm.classList.remove('hidden');
          retrievalForm.classList.add('hidden');
          signupBtn.classList.add('active');
          signinBtn.classList.remove('active');
        });

        signinBtn.addEventListener('click', () => {
          registrationForm.classList.add('hidden');
          retrievalForm.classList.remove('hidden');
          signupBtn.classList.remove('active');
          signinBtn.classList.add('active');
        });

        registrationForm.addEventListener('submit', async (event) => {
          event.preventDefault();

          const homeName = document.getElementById('homeName').value;
          const street = document.getElementById('street').value;
          const city = document.getElementById('city').value;
          const zip = document.getElementById('zip').value;
          const country = document.getElementById('country').value;

          const data = {
            homeName,
            billingAddress: {
              street,
              city,
              zip,
              country,
            },
          };

          try {
            const response = await fetch(
              'https://app.youlocate.me/api/v1/register',
              {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
              }
            );

            if (!response.ok) {
              throw new Error('Failed to register');
            }
            const responseData = await response.json();
            modalBody.textContent = ` ${responseData.locationId}`;
            modal.classList.remove('hidden');
          } catch (error) {
            console.error(error.message);
          }
        });

        retrievalForm.addEventListener('submit', async (event) => {
          event.preventDefault();

          const locateMeId = document.getElementById('locateMeId').value;

          try {
            const response = await fetch(
              `https://app.youlocate.me/api/v1/address/${locateMeId}`,
              {
                method: 'GET',
                headers: {
                  'Content-Type': 'application/json',
                },
              }
            );

            if (!response.ok) {
              throw new Error('Failed to retrieve address');
            }
            const responseData = await response.json();
            codeBlock.textContent = JSON.stringify(responseData, null, 2);
            Prism.highlightElement(codeBlock);
          } catch (error) {
            console.error(error.message);
          }
        });
      </script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-json.min.js"></script>
    </div>
  </body>
</html>
